# Oink组件：MWDS

MoreWindows，一个oink的组件，提供了网页overlay层上的几乎一切功能：悬浮窗、菜单、弹出框、提示框、消息框……

这是我用JQuery写的第一个组件。天哪JQ太爽了！——来自一个Vanilla JS Coder的感叹

窗口操作使用html原生，因为我还没学Vue、React、Angular之类的东西。

## 兼容性

目前仅在基于Chromium或Webkit的浏览器测试通过。不兼容IE9以下。

我没有Apple设备，在Windows那个老掉牙的Safari上测试没通过

## 一、普通窗口

### 新建

`document.createElement("div").classList.add("ds-win")`。

### 属性表

全部使用class，前缀`ds-`。

| 属性class  |            描述             | 互斥 |    缺省    |
| :--------: | :-------------------------: | :--: | :--------: |
|  `ds-win`  |        定义一个窗口         |      |    必需    |
|   `ds-a`   |   窗口位置行为`absolute`    |      |  `fixed`   |
|  `ds-tra`  | 窗口背景透明，hover后变白色 |      |  永远白色  |
|  `ds-mov`  |         窗口可移动          |      |  不可移动  |
|  `ds-cls`  |   双击窗口的空闲部分关闭    |      | 无关闭功能 |
| `ds-ontop` |  置于所有**窗口**的最顶层   |      |            |
|  `ds-zin`  |   运行标记，不允许设置！    |      |            |

对`ds-win`进行style编辑即可自定义其样式，不过请注意`/*<某属性>不可更改*/`的注释，更改这些属性可能导致难以预料的问题出现。

### 窗口提升相关

用过任何窗口式图形化界面吗？用过就应该知道：当点击一个处于窗口之下的窗口时，下方的窗口会提升到上方窗口的上方。这就叫窗口提升。

窗口的`z-index`最小值（默认值）是`50`，目前不支持修改。如果要将内容置于所有窗口下方请使用`z-index：[-2147483584,49]`。若出现堆叠窗口，z-index的范围会向上扩展以容纳这些窗口。移动中的窗口拥有`1000`的`z-index`以确保它的拖动不会受任何元素影响。

按住<kbd>Ctrl</kbd>+<kbd>Alt</kbd>可以无视一切窗口内元素的阻碍，随意拖动/关闭窗口。

## 二、提示框与弹出框

提示框是hover一些元素时弹出的小框，用于提示该元素的作用。提示框类是`ds-tooltip`。在需要添加提示框的元素内部增加一个`<span>`元素，并应用需要的属性即可。提示框的`z-index`为`999`。

### 属性表

|  属性class   |              描述              |      缺省      |
| :----------: | :----------------------------: | :------------: |
| `ds-tooltip` |         定义一个提示框         |      必需      |
| `ds-toolpar` | 父元素标记，自动生成不允许设置 |      必有      |
|  `ds-showb`  |         优先在下方显示         | 优先在上方显示 |
|  `ds-showl`  |         优先在左方显示         | 优先在上方显示 |
|  `ds-showr`  |         优先在右方显示         | 优先在上方显示 |
|  `ds-tria`   |          显示小三角形          |    仅框本身    |
|  `ds-tgra`   |          渐变动画显示          |   不渐变显示   |

对`ds-tooltip`进行style编辑即可自定义其样式，不过请注意`/*<某属性>不可更改*/`的注释，更改这些属性可能导致难以预料的问题出现。

### 优先显示

如果Javascript发现弹出的提示框被浏览器的边界截断，就会将提示框移动到一个合适的位置以让其能够被正常看见。准确地说，它会选择以其父元素为原点的四个方向（正上方、正下方、正左方、正右方）中**最靠近网页中心**的那个。优先显示仅在这种情况不发生的条件下生效。

### 极端情况

在同一个元素内有多个类包含`ds-tooltip`时，