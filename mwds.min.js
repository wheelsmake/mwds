function pressDown(n,e){let o=e.target;for(;;){if($(o).hasClass("ds-win")){n&&e.preventDefault(),e.stopPropagation(),zIndex($(o));break}if("HTML"==$(o).prop("nodeName"))break;o=$(o).parent()}}function dsWinPress(n,e){moving=e.target,movingj=$(moving),movingj.hasClass("ds-mov")&&(ismoving=!0,n?(deltatop=e.touches[0].pageY-movingj.position().top,deltaleft=e.touches[0].pageX-movingj.position().left):(deltatop=e.pageY-movingj.position().top,deltaleft=e.pageX-movingj.position().left),$("*").css({cursor:"grabbing","user-select":"none","-webkit-user-drag":"none","-webkit-user-select":"none"}))}function movingf(n,e){ismoving&&(alert("a"),zIndex($(e)),n?(movingj.css("top",e.touches[0].pageY-deltatop),movingj.css("left",e.touches[0].pageX-deltaleft)):(movingj.css("top",e.pageY-deltatop),movingj.css("left",e.pageX-deltaleft)),movingj.position().left<0&&movingj.css("left",0),movingj.position().top<0&&movingj.css("top",0),movingj.position().left+movingj.innerWidth()>document.body.scrollWidth&&movingj.css("left",document.body.scrollWidth-movingj.innerWidth()),movingj.position().top+movingj.innerHeight()>window.innerHeight&&movingj.hasClass("ds-f")&&movingj.css("top",window.innerHeight-movingj.innerHeight()))}function moveUp(){ismoving&&(ismoving=!1,zIndex(movingj),delStyle($("html")[0]))}function delStyle(n){let e="";$.each(n.style,function(n,o){e+=o}),"cursoruser-select-webkit-user-drag"==e?$(n).removeAttr("style"):$(n).css({cursor:"","user-select":"","-webkit-user-drag":"","-webkit-user-select":""});for(let e=0;e<n.children.length;e++)delStyle(n.children[e])}function tOrb(n,e){n=$(n),e=$(e);let o=n.offset().top,t=o+n.innerHeight(),s=n.offset().left,i=s+n.innerWidth(),c=e.offset().top,d=c+e.innerHeight(),l=e.offset().left,r=l+e.innerWidth();return(o>c&&o<d||t>c&&t<d||c>o&&c<t||d>o&&d<t)&&(s>l&&s<r||i>l&&i<r||l>s&&l<i||r>s&&r<i)?parseInt($(n).css("z-index"))>parseInt($(e).css("z-index"))?"a":parseInt($(n).css("z-index"))<parseInt($(e).css("z-index"))?"b":"s":"e"}function zIndex(n){for(let e=0;e<winlist.length;e++)"b"==tOrb(n,winlist[e])?(a=parseInt(n.css("z-index")),n.css("z-index",parseInt($(winlist[e]).css("z-index"))),$(winlist[e]).css("z-index",a),zIndex($(winlist[e]))):"s"==tOrb(n,winlist[e])&&(n.css("z-index",parseInt(n.css("z-index"))+1),zIndex($(winlist[e])))}function showtips(n,e,o,t){let s=document.createElement("div");s.id="ds-tips",s.innerHTML=e,$("body").append(s)}function hidetips(){$("#ds-tips").remove()}function fixpos(){}function showfixpos(){}function showpopout(){}function hidepopout(){}console.log("mwds.js - MoreWindows ©LJM12914\r\noink组件，当然也可以单独抽出来用，记得带上css");var deltatop,deltaleft,moving,movingj,ismoving=!1,winlist=$(".ds-win");$(function(){$("*").on("mousedown",function(n){pressDown(!1,n)}),$(".ds-mov").on("mousedown",function(n){dsWinPress(!1,n)}),$("*").on("mousemove",function(n){movingf(!1,n)}),$("*").on("mouseup",function(){moveUp()}),$("*").on("touchstart",function(n){pressDown(!0,n)}),$(".ds-mov").on("touchstart",function(n){dsWinPress(!0,n)}),$("*").on("touchmove",function(n){movingf(!0,n)}),$("*").on("touchend",function(){moveUp()}),$(".ds-cls").on("dblclick",function(n){$(n.target).hasClass("ds-cls")&&$(n.target).hide()}),$(".ds-cls").on("mouseenter",function(n){showtips($(n.target),"双击关闭窗口")}),$(".ds-cls").on("mouseleave",function(){hidetips()})});